$(document).ready(function() {
	var css = document.createElement("style");
	css.type = "text/css";
	css.innerHTML = "";
	for(var n = 0; n < 40; n++) {
		for(var o = 0; o < 7; o++) {
			$("#control").append('<div class="control t'+(o+(n*7))+'" data-tile="'+(o+(n*7))+'"></div>');
			css.innerHTML += ".t"+(o+(n*7))+" { background-position: -"+(64*(o+1))+"px -"+(64*(n+1))+"px !important }"
		}
	}

	var direction = "none";

	$(window).keydown(function (event) {
		event.preventDefault();
		switch(event.keyCode) {
			case 40:
				direction = "down";
				break;
			case 39:
				direction = "right";
				break;
			case 38:
				direction = "up";
				break;
			case 37:
				direction = "left";
				break;
		}
		switch(event.keyCode) {
			case 40:
			case 39:
			case 38:
			case 37:
				$("player").removeClass("down");
				$("player").removeClass("up");
				$("player").removeClass("left");
				$("player").removeClass("right");
				$("player").addClass(direction);
				break;
		}	

	});

	$(window).keyup(function (event) {
		switch(event.keyCode) {
			case 40:
			case 39:
			case 38:
			case 37:
				direction = "none";
				break;
		}
	});

	function update() {
		playerAnim();
		playerMove();
	}

	function playerAnim() {
		var frame = 1;
		if(direction != "none") {
			frame = parseInt($("player").attr("data-frame"));
			$("player").removeClass("f"+frame);
			if(frame < 4 ) {
				frame++;
			} else {
				frame = 1;
			}
			$("player").attr("data-frame", frame);
			$("player").addClass("f"+frame);
		}
	}

	function playerMove() {
		playerTop = parseInt($("player").css("top"));
		playerLeft = parseInt($("player").css("left"));
		scrollTop = $(window).scrollTop();
		scrollLeft = $(window).scrollLeft();
		speed = 6;
		switch(direction) {
			case "up":
				$("player").css("top", (playerTop-speed)+"px");
				if(($(window).height() / 2 + scrollTop) > playerTop) {
					$(window).scrollTop(scrollTop-speed);
				}
				break;
			case "right":
				$("player").css("left", (playerLeft+speed)+"px");
				if(($("body").width() / 2 + scrollLeft - 64) < playerLeft) {
					$(window).scrollLeft(scrollLeft+speed);
				}
				break;
			case "down":
				$("player").css("top", (playerTop+speed)+"px");
				if(($(window).height() / 2 + scrollTop) < playerTop) {
					$(window).scrollTop(scrollTop+speed);
				}
				break;
			case "left":
				$("player").css("left", (playerLeft-speed)+"px");
				if(($("body").width() / 2 + scrollLeft) > playerLeft) {
					$(window).scrollLeft(scrollLeft-speed);
				}
				break;
		}
	}

	setInterval(function() { update() }, 60);

	document.body.appendChild(css);
	var tsize = 64;
	var z 	  = 2;
	var rows  = 46;
	var cols  = 92;
	var data  = [[["6","6","6","6","6","6","6","6","6","6","6","6","6","5","5","5","5","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","15","30","6","5","5","5","5","5","5","5","5","5","128","4","4","126","5","6","5","6","6","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["6","6","6","6","5","6","6","5","6","6","6","6","6","6","5","5","5","48","4","4","4","4","4","4","4","4","4","4","4","21","40","40","36","5","5","6","5","5","5","5","5","5","5","5","128","4","4","126","5","6","5","6","6","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","6","6","5","5","5","6","6","6","6","6","5","5","5","6","48","4","4","4","4","4","4","4","4","4","4","15","30","6","5","5","6","5","6","6","6","6","5","5","5","5","122","135","4","4","126","5","5","6","6","6","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","6","6","6","5","5","5","5","5","5","5","5","5","48","4","4","4","21","40","40","40","40","40","40","36","5","5","5","5","5","5","6","6","5","5","5","2","2","2","128","4","4","4","126","5","5","6","6","6","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","6","6","6","5","5","5","5","5","5","5","5","5","48","11","11","11","49","5","5","5","6","6","6","5","5","5","5","5","5","5","5","5","5","5","122","134","134","134","135","4","4","4","126","5","5","6","6","6","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","6","6","5","5","5","5","5","5","6","5","5","5","48","4","4","4","70","57","57","57","57","57","57","57","58","6","5","5","6","5","5","122","134","134","135","4","4","4","4","4","4","4","126","5","6","5","6","6","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["6","6","6","6","6","6","6","6","5","5","5","5","5","5","6","6","5","48","4","4","4","4","4","4","4","4","4","4","74","42","6","5","5","6","5","5","129","120","121","4","4","4","4","4","4","4","4","126","5","5","5","6","5","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","6","6","6","5","5","5","5","5","5","5","6","6","48","4","4","4","4","4","4","4","4","4","4","4","42","5","5","5","5","6","5","5","5","129","121","4","4","4","4","4","4","4","126","5","5","6","6","5","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","6","6","6","5","5","5","5","5","5","5","5","6","48","4","4","4","4","4","4","4","4","4","4","4","42","6","5","5","6","5","5","6","5","5","128","119","120","120","120","120","120","120","130","5","5","6","5","5","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","5","6","5","5","5","5","5","5","5","5","6","48","4","4","4","4","4","4","4","4","4","4","4","42","5","5","5","5","6","5","6","5","5","129","130","5","5","5","5","5","5","5","5","5","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","6","6","6","6","13","5","5","5","5","2","2","5","5","5","48","4","4","4","4","4","4","4","4","4","4","4","42","6","5","5","5","5","6","6","6","5","5","5","5","5","6","5","5","6","6","5","6","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","6","5","6","6","13","5","5","5","2","2","2","2","5","5","48","4","4","4","4","4","4","4","4","4","4","4","42","5","5","5","6","5","5","5","5","5","6","5","5","6","5","5","5","5","5","5","5","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","6","6","13","5","5","5","2","2","2","2","5","5","48","4","4","4","4","4","4","4","4","4","4","4","42","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6","5","5","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","48","4","4","4","4","4","4","4","4","4","4","4","42","6","5","5","6","5","6","6","6","5","6","6","5","5","6","6","6","6","5","5","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","5","5","5","5","5","5","6","5","5","5","5","5","48","4","4","4","4","4","4","4","4","4","4","4","42","6","5","5","6","6","5","5","5","5","5","5","5","5","6","6","6","6","5","5","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","5","5","5","5","5","5","13","5","13","13","5","5","48","4","4","4","4","4","4","4","4","4","4","4","42","6","5","5","6","5","5","5","5","5","5","5","5","5","5","6","6","5","5","5","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","5","5","5","5","5","6","6","5","6","5","5","5","48","4","4","4","4","4","4","4","4","4","4","4","42","6","5","5","6","6","5","5","5","5","5","5","5","5","6","6","5","5","5","5","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","6","6","6","5","5","5","6","5","5","5","5","6","6","6","5","6","48","4","4","4","4","4","4","4","4","4","4","4","42","6","5","5","6","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","6","5","5","5","5","5","5","6","6","6","6","6","5","5","48","4","4","4","4","4","4","4","4","4","4","4","42","6","5","5","6","6","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","6","5","5","5","5","6","5","6","6","6","6","6","6","6","48","4","4","4","4","4","4","4","4","4","4","4","42","5","5","5","6","6","6","6","5","5","5","5","5","5","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","5","5","6","6","5","6","5","6","6","6","5","6","55","4","4","4","4","4","4","4","4","4","4","15","30","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["57","57","57","64","57","57","57","57","57","57","57","57","57","57","57","57","57","76","4","4","4","4","4","4","4","4","21","40","36","5","5","5","5","6","6","5","6","5","5","6","6","5","5","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["1","1","6","6","5","5","5","6","6","2","2","2","2","2","2","128","4","4","4","4","4","4","4","4","4","4","42","5","5","5","5","5","5","6","6","6","5","35","40","41","5","5","5","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["1","1","1","1","6","5","5","6","2","2","2","2","2","2","2","128","4","4","4","4","4","4","4","4","4","4","42","6","5","5","5","5","6","35","40","40","40","49","5","55","40","40","40","41","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["1","1","1","1","1","5","5","6","2","2","2","2","2","2","2","128","4","4","4","4","4","4","4","4","4","4","42","6","5","5","5","6","35","42","6","6","5","63","64","69","5","6","6","48","41","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["1","1","1","1","2","1","1","1","1","2","2","1","2","2","2","128","4","4","4","4","4","4","4","4","4","4","42","5","5","5","35","40","42","42","6","6","5","13","5","13","6","6","5","48","48","41","59","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57",0,0,0,0,0,0,0],["1","1","1","1","1","1","1","1","1","1","6","6","2","2","2","128","4","4","4","4","4","4","4","4","4","4","42","5","5","5","42","5","42","49","6","6","6","5","5","13","6","5","5","55","48","48","48","75","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["1","1","1","2","1","1","1","1","2","1","1","2","6","2","2","128","4","4","4","4","4","4","4","4","4","4","42","5","5","5","42","6","42","63","57","57","57","57","57","57","57","57","57","69","48","48","48","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["1","1","1","2","1","1","1","1","1","1","1","2","2","2","2","128","4","4","4","4","4","4","4","4","4","4","42","6","5","5","42","5","49","5","6","6","5","13","5","13","5","6","5","6","55","48","48","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["1","1","1","2","2","1","1","1","1","1","1","1","1","2","2","128","4","4","4","4","4","4","4","4","4","4","42","6","5","5","42","5","63","57","57","57","57","57","57","57","57","57","57","57","69","48","48","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["2","2","2","2","2","2","1","1","1","1","1","2","2","2","2","128","4","4","4","4","4","4","4","4","4","4","42","6","5","5","42","6","5","6","6","6","6","6","5","6","6","6","6","6","6","48","48","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["2","2","2","2","2","2","1","1","1","1","1","2","2","2","2","128","4","4","4","4","4","4","4","4","4","4","42","6","5","5","42","6","5","5","5","6","6","6","5","6","6","6","6","6","6","48","48","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["2","2","2","2","2","1","2","2","1","1","1","1","2","2","2","128","4","4","4","4","4","4","4","4","4","4","42","5","5","5","49","6","5","5","6","5","6","13","5","6","6","6","6","6","6","55","48","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["2","2","2","2","2","2","1","2","1","1","2","2","2","2","2","128","4","4","4","4","4","4","4","4","4","4","42","5","5","5","63","57","57","57","57","57","57","57","57","57","57","57","57","57","57","69","48","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["134","134","134","123","2","2","1","2","2","122","134","134","134","134","134","135","4","4","4","4","4","4","4","4","4","4","42","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6","48","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","4","4","126","2","2","2","2","122","135","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","42","6","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6","6","6","6","48","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","4","4","126","2","2","2","122","135","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","42","6","6","6","6","6","5","5","5","6","5","5","6","6","6","6","6","6","6","6","48","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","4","4","133","134","134","134","135","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","49","6","6","6","5","5","6","6","6","6","6","6","5","5","5","5","6","6","6","6","55","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","70","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","76","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[["4","11","4","11","4","11","4","11","4","11","4","11","4","11","4","11","4","13",0,0,0,"0","0","0","0","0","0","0",0,0,0,"0","0","0","63","12","11","4","13","0","12","13","0","126",0,0,0,0,"128","69",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","4","13","12","13","12","13","12","13","12","11","4","13","12","13","12","11","6",0,0,"0","0","0","0","0","0","0","0",0,0,0,"0","0","22","63",0,"12","13","0","0","0","0","119","130",0,0,0,0,"128","69",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13","5","6","7","7","7","7","7","7","12","13","7","7","15",0,"12","13",0,0,"0","0","0","0","0","0","5","6",0,0,"22","0","0",0,"63",0,"0","0","0","119","120","120","130",0,0,0,0,0,"128","69",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6","12","13",0,0,0,0,"77","78","78","78","78","78","78","78","78","66","66","66","66","66","99","100","0","0","12","13","0","98","99","99","100",0,"63",0,0,0,"119","130",0,0,0,0,0,0,0,0,"128","69",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13",0,0,0,0,0,"22","84","80","92","92","92","92","92","92","92","73","73","73","73","73","113","114","22","0","0","0","0","112","113","102","107","0","63","119","120","120","130",0,0,0,0,0,0,0,0,0,"128","69",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6",0,0,0,0,0,0,"84","86",0,0,0,0,0,"0","0","0","0","0",0,"0","0","0","0","0","0","0",0,"5","6","105","107",0,"63","126",0,0,0,0,0,0,0,0,0,0,0,0,"128","69",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","11","6",0,0,0,0,0,"84","86",0,"0","0",0,0,0,0,0,0,0,0,"0","0","0","0","0","0","0",0,"12","13","105","107",0,"63","126",0,0,0,0,0,0,0,0,0,0,0,0,"128","69",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","4","13",0,"23","25",0,0,"84","86",0,0,"23","24","25",0,0,0,0,0,"0","0","0","0","0","0","0","0",0,"0","0","105","107",0,"63","133","134","123",0,0,0,0,0,0,0,0,0,0,"128","69",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13","0","29","30","32","33",0,"84","86","14","29","30","31","32","33",0,0,0,0,"0","0","0","0","0","0","0","0",0,"0","0","105","107",0,"63",0,0,"133","123",0,0,0,0,0,0,0,0,0,"128","69",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6","35","36","37","39","40","41","84","86","35","36","37","31","39","40","41",0,0,0,"0","0","0","0","0","0","0","0",0,"0","0","105","107",0,"63",0,0,0,"126",0,0,"122","134","134","134","134","134","134","135","69",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13","42","43","44","46","47","48","84","86","42","37","37","38","39","39","48",0,0,0,0,"0","0","0","0","0","0","0",0,"0","0","105","107","21","63",0,0,0,"133","134","134","135","0",0,0,0,0,0,0,"69",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6","49","50","51","53","54","55","84","86","42","43","44","45","46","47","48",0,0,0,"0","0","0","0","0","0","0","0",0,"0","0","105","107",0,"70","70","70","70","70","70","70","70","70","70","70","70","71","21","75","76",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13","0","57","58","59","61","0","84","86","49","50","51","52","53","54","55",0,0,0,0,0,0,0,0,0,0,"0",0,0,0,"105","107",0,"5","6","5","6","5","6","5","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6",0,"15","103","77","78","78","88","86","56","57","58","59","60","61","62",0,0,0,0,0,0,0,0,0,0,"0",0,0,0,"105","107","5","4","11","4","11","4","13","12","13",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13",0,0,"117","84","80","92","92","93","63",0,"103",0,0,0,"69",0,0,0,0,0,0,0,0,0,0,"0",0,0,0,"105","107","12","13","12","11","4","11","6","5","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6",0,0,"0","84","86",0,0,0,"63","0","110",0,0,"21","69",0,0,0,0,0,0,0,0,0,0,"0",0,"5","6","105","107","0","0","5","4","11","4","11","4","11","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13",0,0,0,"84","86",0,0,0,"70","71","117","75","76","76","76",0,0,0,0,0,0,0,0,0,0,"0",0,"12","13","105","107","0","0","12","13","12","13","12","13","12","13",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6",0,0,"0","84","86","0",0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0",0,0,0,"105","107","77","78","78","78","78","78","78","78","78","78","78","78","78","78","78",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13",0,0,0,"84","86","22",0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,"0",0,0,0,"105","107","91","92","92","92","92","92","92","92","92","92","92","92","92","92","92",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6",0,0,0,"84","86",0,0,0,0,0,0,0,0,"0","0","0","0","0",0,0,0,0,0,0,0,"0",0,0,0,"105","107",0,"5","6",0,0,"5","6","5","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["12","13",0,0,0,"84","86",0,0,0,0,0,0,0,0,"0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,"105","107",0,"12","13",0,"5","4","13","12","13",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["0","0","0","0","0","82","83","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,"98","109","107","0",0,0,0,"12","13",0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["0","147","0","0","21","98","100","0","0","149","0","0","0","0","0","0","0","0","0","0","0","0",0,0,0,0,0,0,"98","99","109","101","114",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["0","154","155","144","0","105","107","0","143","156","169","170","172","173","0","0","0","0","0","0","0","0",0,0,0,0,0,0,"105","101","113","114",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["0","0","0","154","144","112","114","0","149","175","176","177","179","180","181","0","0","0","0","0","0","0",0,0,0,0,0,0,"105","107","15",0,0,0,0,"5","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,"0","154","155","155","155","156","182","183","184","186","187","188","0","0","0","0",0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,"12","13",0,"103",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,"98","100","0","0","189","190","191","193","194","195","0","0","0","0",0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,"0","22","117","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,"215",0,0,"105","107","56","56","56","197","199","199","201","0","0","0","0","0","0",0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,"89",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,"212","222",0,0,"105","107","63","0","0","0","0","66","66","0","0","0","0","0",0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,"219",0,0,0,"105","107","70","70","70","70","70","70","70","71","0",0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,"89",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,"213","214",0,0,"105","108","99","99","99","100",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,"103",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,"220","221",0,0,"112","113","113","113","113","114","213","214","212",0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,"110",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,"216","215",0,0,"221","219",0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,"0","117","21",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,"210","211","0","223","222",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,"89",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,"217","218","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","108","99","99","99","99","99","99","99","99","100","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"112","113","113","113","113","113","113","113","113","113","114","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"21",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]];
	var tile  = 0;

	for(var m = 0; m< z; m++) {
		$("#map").append('<div class="layer l'+m+'" data-m="'+m+'"></div>');
		for(var k = 0; k < rows; k++) {
			for(var l = 0; l < cols; l++) {
				if(data[m] == undefined) {
					data[m] = [];
				}
				if(data[m][k] == undefined) {
					data[m][k] = [];
				}
				if(data[m][k][l] == undefined) {
					data[m][k][l] = 0;
				}
				$("#map .layer.l"+m+"").append('<div class="tile t'+data[m][k][l]+'" data-k="'+k+'" data-l="'+l+'" style="left:'+l*64+'px; top: '+k*64+'px;"></div>');
			}
		}
	}

	$(".tile").on("click", function() {
		$(this).attr("class", "tile t"+tile);
		data[$(this).closest(".layer").attr("data-m")][$(this).attr("data-k")][$(this).attr("data-l")] = tile;
		$("#export").val(JSON.stringify(data));
	});

	$(".control").click(function() {
		tile = $(this).attr("data-tile");
		$(".control").removeClass("active");
		$(this).addClass("active");
	});

	$("#lock0").click(function() {
		$("body").addClass("lock1");
		$("#lock1").removeClass("in");
		$("body").toggleClass("lock0");
		$(this).toggleClass("in");
	})
	$("#lock1").click(function() {
		$("body").addClass("lock0");
		$("#lock0").removeClass("in");
		$("body").toggleClass("lock1");
		$(this).toggleClass("in");
	})
});