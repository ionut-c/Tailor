$(document).ready(function() {
	var css = document.createElement("style");
	css.type = "text/css";
	css.innerHTML = "";
	for(var n = 0; n < 24; n++) {
		for(var o = 0; o < 7; o++) {
			$("#control").append('<div class="control t'+(o+(n*7))+'" data-tile="'+(o+(n*7))+'"></div>');
			css.innerHTML += ".t"+(o+(n*7))+" { background-position: -"+(64*(o+1))+"px -"+(64*(n+1))+"px !important }"
		}
	}
	document.body.appendChild(css);
	var tsize = 64;
	var z 	  = 2;
	var rows  = 40;
	var cols  = 50;
	var data  = [[["6","6","6","6","6","6","6","6","6","6","6","6","6","5","5","5","5","48","4","21","36",0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["6","6","6","6","5","6","6","5","6","6","6","6","6","6","5","5","5","48","4","42","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","6","6","5","5","5","6","6","6","6","6","5","5","5","6","48","4","42","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","6","6","6","98","99","99","99","99","99","99","100","5","48","4","42","98","99","99","99","99","99","99","99",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","6","6","6","105","101","113","113","113","113","113","114","5","48","4","42","112","113","113","113","113","113","113","113",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","6","6","5","105","107","5","5","5","6","5","5","5","48","4","42","6","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["6","6","6","6","6","6","6","6","105","107","5","5","5","5","6","6","5","48","4","42","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","6","6","6","105","107","5","5","5","5","5","6","6","48","4","42","5","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","6","6","6","105","107","5","5","5","5","5","5","6","48","4","42","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","6","105","107","5","5","5","5","5","5","6","48","4","42","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","6","6","6","6","6","105","107","5","5","2","2","5","5","5","48","4","42","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","6","5","6","6","6","105","107","5","2","2","2","2","5","5","48","4","49","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","6","6","6","105","107","5","2","2","2","2","5","5","48","4","70","57","57","57","57","57","57","57",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","98","99","99","109","107","5","5","5","5","5","5","5","48","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","6","105","101","113","113","114","5","5","6","5","5","5","5","48","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","5","5","5","5","5","6","6","6","5","5","48","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","5","5","5","6","6","5","6","5","5","5","48","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","6","5","5","5","105","107","6","5","5","5","5","6","6","6","5","6","48","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","5","5","5","5","6","6","6","6","5","5","48","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","5","5","5","6","6","6","6","6","6","6","48","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","5","5","5","5","5","6","6","6","5","6","55","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","76","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[["4","11","4","11","4","11","4","11","4","11","4","11","4","11","4","13",0,0,0,0,0,"0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","4","13","12","13","12","13","12","13","12","11","4","13","12","13","163",0,0,0,0,"0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13","5","6","7","7","7","7","7","7","12","13","7","7","15",0,0,0,0,0,"0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6","12","13",0,0,0,0,0,0,0,0,0,0,"0","3","3","3","3","3","3",0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13",0,0,0,0,0,0,0,0,0,0,0,0,"0","10","10","10","10","10","10",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6",0,0,0,0,0,0,0,0,0,0,0,0,0,"0","0","0","0","0",0,"0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","11","6",0,0,0,0,0,0,0,0,"0","0",0,0,0,0,0,0,0,0,"0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","4","13",0,"23","25",0,0,"14",0,0,0,"23","24","25",0,0,0,0,0,"0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13","15","29","30","32","33",0,0,0,0,"29","30","31","32","33",0,0,0,0,"0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6","35","36","37","39","40","41",0,0,"35","36","37","31","39","40","41",0,0,0,"0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13","42","43","44","46","47","48",0,"0","42","37","37","38","39","39","48",0,0,0,0,"0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6","49","50","51","52","54","55",0,"0","42","43","44","45","46","47","48",0,0,0,"0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13","56","57","58","59","61","62",0,"0","49","50","51","52","53","54","55",0,0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6",0,0,"17",0,0,0,0,"0","56","57","58","59","60","61","62",0,0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13",0,0,0,0,0,0,0,0,0,0,"16",0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["4","13",0,0,0,"0","0",0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["11","6",0,0,0,"0","0",0,0,0,0,0,0,0,0,"0","0","0","0","0",0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["12","13",0,0,0,"0","0",0,0,0,0,0,0,0,0,"0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["0","0","0","0","0","8","9","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,"0","0",0,0,0,0,0,0,0,0,"0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,"0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,"0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,"0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]];
	var tile  = 0;

	for(var m = 0; m< z; m++) {
		$("#map").append('<div class="layer l'+m+'" data-m="'+m+'"></div>');
		for(var k = 0; k < rows; k++) {
			for(var l = 0; l < cols; l++) {
				if(data[m] == undefined) {
					data[m] = [];
				}
				if(data[m][k] == undefined) {
					data[m][k] = [];
				}
				if(data[m][k][l] == undefined) {
					data[m][k][l] = 0;
				}
				$("#map .layer.l"+m+"").append('<div class="tile t'+data[m][k][l]+'" data-k="'+k+'" data-l="'+l+'" style="left:'+l*64+'px; top: '+k*64+'px;"></div>');
			}
		}
	}

	$(".tile").on("click", function() {
		$(this).attr("class", "tile t"+tile);
		data[$(this).closest(".layer").attr("data-m")][$(this).attr("data-k")][$(this).attr("data-l")] = tile;
		$("#export").val(JSON.stringify(data));
	});

	$(".control").click(function() {
		tile = $(this).attr("data-tile");
		$(".control").removeClass("active");
		$(this).addClass("active");
	});

	$("#lock0").click(function() {
		$("body").addClass("lock1");
		$("#lock1").removeClass("in");
		$("body").toggleClass("lock0");
		$(this).toggleClass("in");
	})
	$("#lock1").click(function() {
		$("body").addClass("lock0");
		$("#lock0").removeClass("in");
		$("body").toggleClass("lock1");
		$(this).toggleClass("in");
	})
});