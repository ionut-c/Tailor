$(document).ready(function() {
	var css = document.createElement("style");
	css.type = "text/css";
	css.innerHTML = "";
	for(var n = 0; n < 24; n++) {
		for(var o = 0; o < 7; o++) {
			$("#control").append('<div class="control t'+(o+(n*7))+'" data-tile="'+(o+(n*7))+'"></div>');
			css.innerHTML += ".t"+(o+(n*7))+" { background-position: -"+(64*(o+1))+"px -"+(64*(n+1))+"px !important }"
		}
	}
	document.body.appendChild(css);
	var tsize = 64;
	var z 	  = 2;
	var rows  = 40;
	var cols  = 50;
	var data  = [[["6","6","6","6","6","6","6","6","6","6","6","6","6","5","5","48","4","4","4","21","36",0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["6","6","6","6","5","6","6","5","6","6","6","6","6","6","5","48","4","4","4","42","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","6","6","5","5","5","6","6","6","6","6","5","5","48","4","4","4","42","5",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","98","99","99","99","99","99","99","99","99","100","48","4","4","4","42","98","99","99","99","99","99","99","99",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","101","113","113","113","113","113","113","113","114","48","4","4","4","42","112","113","113","113","113","113","113","113",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","5","5","5","5","5","5","5","5","55","4","4","4","42","6","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["6","6","6","6","6","105","107","6","6","59","57","57","57","57","57","76","4","4","4","42","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","6","6","48","61","2","2","2","2","4","4","4","4","42","5","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","6","6","48","2","2","2","2","2","4","4","4","4","42","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","6","5","48","2","2","2","2","2","4","4","4","4","42","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","6","6","105","107","6","5","48","2","2","2","2","2","4","4","4","4","42","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","6","5","105","107","5","5","48","2","2","2","2","2","4","4","4","4","49","6","6","6","6",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","5","5","48","2","2","2","2","2","4","4","4","4","70","57","57","57","57","57","57","57",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","5","5","48","2","2","2","2","2","4","4","4","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","6","105","107","5","5","48","2","2","2","2","2","4","4","4","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","5","5","48","2","2","2","2","2","4","4","4","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","5","5","48","2","2","2","2","2","4","4","4","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","6","5","5","5","105","107","6","5","31","25","2","2","2","2","4","4","4","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","5","5","5","39","40","40","40","40","27","4","4","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","5","5","5","5","5","5","5","5","48","4","4","4","4","4","4","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["5","5","5","5","5","105","107","5","5","5","5","5","5","5","5","55","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","76","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","4","4","4","4","4",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[["161","154","161","154","161","154","161","154","161","154","161","154","161","154","161","156",0,0,0,0,0,"0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["154","161","154","163","162","163","162","163","162","163","162","163","162","163","162","163",0,0,0,0,"0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["161","154","163","7","7","7","7","7","7","7","7","7","7","7","7",0,0,0,0,0,"0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["154","163",0,0,0,0,0,0,0,0,0,0,0,0,"37","37","37","37","37","37","37",0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["161","156",0,0,0,0,0,0,0,0,0,0,0,0,"44","44","44","44","44","44","44",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["154","163",0,0,0,0,0,0,0,0,0,0,0,0,0,"0","0","0","0","0",0,"0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["161","156",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["154","163",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["161","156",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["154","163",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["161","156",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["154","163",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["161","156",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["154","163",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["161","156",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["154","163",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["161","156",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["154","163",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["161","156",0,0,0,"33","33",0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["154","163",0,0,0,"33","33",0,0,0,0,0,0,0,0,"33","0","0","0","0",0,0,0,0,0,0,0,"0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["163",0,0,0,0,"33","33",0,0,0,0,0,0,0,0,"0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["33","33","33","33","33","51","52","33","33","33","33","33","33","33","33","33","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,"0","0",0,0,0,0,0,0,0,0,"0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,"0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,"0","0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,"0","0","0","0","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]];
	var tile  = 0;

	for(var m = 0; m< z; m++) {
		$("#map").append('<div class="layer l'+m+'" data-m="'+m+'"></div>');
		for(var k = 0; k < rows; k++) {
			for(var l = 0; l < cols; l++) {
				if(data[m] == undefined) {
					data[m] = [];
				}
				if(data[m][k] == undefined) {
					data[m][k] = [];
				}
				if(data[m][k][l] == undefined) {
					data[m][k][l] = 0;
				}
				$("#map .layer.l"+m+"").append('<div class="tile t'+data[m][k][l]+'" data-k="'+k+'" data-l="'+l+'" style="left:'+l*64+'px; top: '+k*64+'px;"></div>');
			}
		}
	}

	$(".tile").on("click", function() {
		$(this).attr("class", "tile t"+tile);
		data[$(this).closest(".layer").attr("data-m")][$(this).attr("data-k")][$(this).attr("data-l")] = tile;
		$("#export").val(JSON.stringify(data));
	});

	$(".control").click(function() {
		tile = $(this).attr("data-tile");
		$(".control").removeClass("active");
		$(this).addClass("active");
	});

	$("#lock0").click(function() {
		$("body").addClass("lock1");
		$("#lock1").removeClass("in");
		$("body").toggleClass("lock0");
		$(this).toggleClass("in");
	})
	$("#lock1").click(function() {
		$("body").addClass("lock0");
		$("#lock0").removeClass("in");
		$("body").toggleClass("lock1");
		$(this).toggleClass("in");
	})
});