$(document).ready(function() {
	var css = document.createElement("style");
	css.type = "text/css";
	css.innerHTML = "";
	for(var n = 0; n < 40; n++) {
		for(var o = 0; o < 7; o++) {
			$("#control").append('<div class="control t'+(o+(n*7))+'" data-tile="'+(o+(n*7))+'"></div>');
			css.innerHTML += ".t"+(o+(n*7))+" { background-position: -"+(64*(o+1))+"px -"+(64*(n+1))+"px !important }"
		}
	}

	var direction = "none";

	$(window).keydown(function (event) {
		switch(event.keyCode) {
			case 40:
				event.preventDefault();
				direction = "down";
				break;
			case 39:
				event.preventDefault();
				direction = "right";
				break;
			case 38:
				event.preventDefault();
				direction = "up";
				break;
			case 37:
				event.preventDefault();
				direction = "left";
				break;
		}
		switch(event.keyCode) {
			case 40:
			case 39:
			case 38:
			case 37:
				$("player").removeClass("down");
				$("player").removeClass("up");
				$("player").removeClass("left");
				$("player").removeClass("right");
				$("player").addClass(direction);
				break;
		}	

	});

	$(window).keyup(function (event) {
		switch(event.keyCode) {
			case 40:
			case 39:
			case 38:
			case 37:
				direction = "none";
				break;
		}
	});

	function update() {
		playerAnim();
		playerMove();
	}

	function playerAnim() {
		var frame = 1;
		if(direction != "none") {
			frame = parseInt($("player").attr("data-frame"));
			$("player").removeClass("f"+frame);
			if(frame < 4 ) {
				frame++;
			} else {
				frame = 1;
			}
			$("player").attr("data-frame", frame);
			$("player").addClass("f"+frame);
		}
	}

	function playerMove() {
		playerTop = parseInt($("player").css("top"));
		playerLeft = parseInt($("player").css("left"));
		scrollTop = $(window).scrollTop();
		scrollLeft = $(window).scrollLeft();
		speed = 12;
		switch(direction) {
			case "up":
				$("player").css("top", (playerTop-speed)+"px");
				if(($(window).height() / 2 + scrollTop) > playerTop) {
					$(window).scrollTop(scrollTop-speed);
				}
				break;
			case "right":
				$("player").css("left", (playerLeft+speed)+"px");
				if(($("body").width() / 2 + scrollLeft - 64) < playerLeft) {
					$(window).scrollLeft(scrollLeft+speed);
				}
				break;
			case "down":
				$("player").css("top", (playerTop+speed)+"px");
				if(($(window).height() / 2 + scrollTop) < playerTop) {
					$(window).scrollTop(scrollTop+speed);
				}
				break;
			case "left":
				$("player").css("left", (playerLeft-speed)+"px");
				if(($("body").width() / 2 + scrollLeft) > playerLeft) {
					$(window).scrollLeft(scrollLeft-speed);
				}
				break;
		}
	}

	setInterval(function() { update() }, 60);

	document.body.appendChild(css);
	var tsize = 64;
	var z 	  = 2;
	var drawing = false;
	var rows  = 46;
	var cols  = 92;
	var data  = [[["4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["4","4","4","4","4","119","120","120","120","120","120","120","120","120","120","120","120","120","120","120","120","120","120","120","120","120","120","120","120","120","121","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["120","120","120","120","120","130","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","128","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","128","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","129","121","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","2","2","2","2","28","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","40","27","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","2","2","28","40","42","6","6","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6","6","6","6","6","5","5","5","5","6","5","6","5","5","5","5","5","5","5","5","5","6","6","48","27","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","28","40","42","6","42","6","6","6","6","5","5","59","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","58","5","5","5","5","5","6","5","5","5","5","5","5","5","5","6","5","6","6","48","48","27","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","6","42","6","42","6","6","6","5","5","5","48","59","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","58","42","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","5","6","6","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","6","42","6","42","5","5","5","5","5","5","48","48","59","57","57","57","57","57","57","57","57","57","57","57","57","57","57","58","42","42","5","5","5","6","5","5","5","5","5","5","5","5","5","5","5","6","6","6","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","6","42","6","42","5","5","5","5","5","5","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","42","42","42","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","6","42","6","42","6","6","6","6","5","6","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","42","42","42","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","6","42","6","42","6","6","6","6","6","5","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","42","42","42","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","5","6","6","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","6","42","6","42","6","6","6","6","6","6","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","42","42","42","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","5","6","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","6","42","6","49","6","6","6","6","6","6","55","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","42","42","42","5","6","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","5","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","6","42","6","63","57","57","57","57","57","57","69","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","15","30","42","42","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","6","42","6","6","6","6","6","6","6","6","6","48","48","4","4","4","4","4","4","21","40","40","40","40","40","40","36","29","30","42","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","6","42","6","6","6","6","6","6","6","6","6","48","48","4","4","4","4","4","4","42","35","40","40","40","40","40","40","36","29","30","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","5","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","6","49","6","6","6","6","6","6","6","6","6","55","48","4","4","4","4","4","4","42","42","35","40","40","40","40","40","40","36","5","5","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","63","57","57","57","57","57","57","57","57","57","69","48","4","4","4","4","4","4","42","42","42","6","6","6","6","5","5","5","6","6","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","5","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","5","5","5","5","5","5","5","5","6","6","6","48","4","4","4","4","4","4","42","42","42","6","6","5","5","5","6","6","13","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","5","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","5","5","5","5","5","5","5","5","6","6","6","48","4","4","4","4","4","4","42","42","42","6","5","5","13","6","6","6","6","6","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","5","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","5","5","6","5","6","5","5","5","6","6","6","48","4","4","4","4","4","4","42","42","42","6","6","5","5","13","13","6","6","5","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","5","5","6","5","5","6","5","5","6","6","6","48","4","4","4","4","4","4","42","42","42","6","6","6","5","5","5","5","5","5","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","5","48","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","5","5","5","5","6","5","5","6","6","6","6","48","4","4","4","4","4","4","42","42","49","6","6","6","6","5","5","5","6","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","55","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","5","5","5","6","6","6","5","6","6","6","6","48","4","4","4","4","4","4","42","42","63","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","69","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","5","5","5","6","5","5","6","6","5","5","5","48","4","4","4","4","4","4","42","42","6","6","6","6","6","6","6","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","21","40","40","40","40","40","40","40","40","40","40","40","40","40","40"],["2","2","2","2","2","2","2","2","42","5","5","5","5","6","6","6","6","6","5","5","5","48","4","4","4","4","4","4","42","42","6","6","6","6","6","6","6","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","42","6","5","5","5","5","5","5","5","5","5","5","5","5","5"],["2","2","2","2","2","2","2","2","42","5","5","5","6","5","6","6","6","6","5","5","5","48","4","4","4","4","4","4","42","42","6","6","6","5","5","6","6","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","42","6","5","5","5","5","5","5","5","5","5","5","5","5","5"],["2","2","2","2","2","2","2","2","42","5","5","5","6","6","5","6","6","5","5","5","5","48","4","4","4","4","4","4","42","42","6","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6","6","6","5","5","5","5","5","5","48","48","11","11","11","11","11","11","11","11","11","11","11","11","11","11","11","11","11","49","6","6","6","6","6","6","6","6","6","6","6","6","6","6"],["2","2","2","2","2","2","2","2","42","5","5","5","5","6","5","6","5","6","5","5","5","48","4","4","4","4","4","4","42","42","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6","6","6","5","5","5","5","5","5","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","70","57","57","57","57","57","57","57","57","57","57","57","57","57","57"],["2","2","2","2","2","2","2","2","42","5","5","5","5","6","6","5","5","5","5","5","5","48","4","4","4","4","4","4","42","42","6","5","6","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","5","5","5","5","5","5","5","5","5","5","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","5","5","5","5","6","5","5","5","5","5","5","48","4","4","4","4","4","4","42","42","6","5","6","6","5","5","5","5","5","5","5","5","5","5","5","5","6","5","5","5","5","5","5","5","5","5","5","5","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","5","5","5","6","5","5","5","6","5","5","5","48","4","4","4","4","4","4","42","42","6","5","6","6","5","5","5","5","5","5","5","6","6","6","5","5","6","5","5","5","5","5","5","5","5","5","5","5","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","5","5","5","5","5","5","5","5","5","5","5","48","4","4","4","4","4","4","42","42","6","5","5","6","6","5","5","5","5","6","6","6","5","5","5","5","6","5","5","5","5","5","5","5","5","5","5","5","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","5","5","5","5","5","5","5","5","5","5","5","48","4","4","4","4","4","4","42","42","5","6","5","6","6","6","6","6","6","6","6","5","5","5","5","5","6","6","5","5","5","5","5","5","5","5","6","6","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","5","5","5","6","6","6","5","6","5","5","5","48","4","4","4","4","4","4","42","42","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","5","5","5","5","5","5","5","5","6","6","6","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","5","5","5","6","5","5","5","6","5","5","5","48","4","4","4","4","4","4","42","42","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","5","5","5","6","6","5","6","6","5","5","5","48","4","4","4","4","4","4","42","42","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","42","5","6","6","6","5","5","5","5","6","5","5","5","48","4","4","4","4","4","4","42","42","6","6","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6","6","48","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","49","5","5","6","5","6","6","5","6","6","6","5","5","55","4","4","4","4","4","4","42","49","6","6","6","6","6","6","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6","6","55","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","56","57","57","57","57","57","57","57","57","57","57","57","57","76","4","4","4","4","4","4","42","63","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","57","69","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","122","135","4","4","4","4","4","4","4","4","42","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6","6","5","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","128","4","4","4","4","4","4","4","4","4","42","5","5","6","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6","6","5","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","128","4","4","4","4","4","4","4","4","4","42","6","6","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","5","6","5","6","6","6","6","5","5","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","128","4","4","4","4","4","4","4","4","4","42","6","6","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6","6","6","6","6","6","6","6","5","5","48","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"98","99","99","99","99","99","99","99","99","99","99","99","99","99","66","66","66","66","66","66","66","66","66","66","66","66","66","66","66","66","66","66","66","66","66","99","99","99","99","99","99","99","99","99","99","99","99","99"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","101","113","113","113","113","113","113","113","113","113","113","113","113","73","73","73","73","73","73","73","73","73","73","73","73","73","73","73","73","73","73","73","73","73","113","113","113","113","113","113","113","113","113","113","113","113","113"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"105","107",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"82","83",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"84","86",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"84","86",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"84","86",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"84","86",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]];
	var tile  = 0;

	for(var m = 0; m< z; m++) {
		$("#map").append('<div class="layer l'+m+'" data-m="'+m+'"></div>');
		for(var k = 0; k < rows; k++) {
			for(var l = 0; l < cols; l++) {
				if(data[m] == undefined) {
					data[m] = [];
				}
				if(data[m][k] == undefined) {
					data[m][k] = [];
				}
				if(data[m][k][l] == undefined) {
					data[m][k][l] = 0;
				}
				$("#map .layer.l"+m+"").append('<div class="tile t'+data[m][k][l]+'" data-k="'+k+'" data-l="'+l+'" style="left:'+l*64+'px; top: '+k*64+'px;"></div>');
			}
		}
	}

	$(".tile").on("mousedown", function(e) {
	    switch(e.which)
	    {
	        case 1:
				drawing = true;
				$(this).attr("class", "tile t"+tile);
				data[$(this).closest(".layer").attr("data-m")][$(this).attr("data-k")][$(this).attr("data-l")] = tile;
				$("#export").val(JSON.stringify(data));
	        break;
	    }
	});

	$(".tile").on("mouseenter", function() {
		if(drawing === true) {
			$(this).attr("class", "tile t"+tile);
			data[$(this).closest(".layer").attr("data-m")][$(this).attr("data-k")][$(this).attr("data-l")] = tile;
			$("#export").val(JSON.stringify(data));
		}
	})

	$(".tile").on("mouseup", function() {
		drawing = false;
	});

	$(".control").click(function() {
		tile = $(this).attr("data-tile");
		$(".control").removeClass("active");
		$(this).addClass("active");
	});

	$("#lock0").click(function() {
		$("body").addClass("lock1");
		$("#lock1").removeClass("in");
		$("body").toggleClass("lock0");
		$(this).toggleClass("in");
	})
	$("#lock1").click(function() {
		$("body").addClass("lock0");
		$("#lock0").removeClass("in");
		$("body").toggleClass("lock1");
		$(this).toggleClass("in");
	})
});