$(document).ready(function() {
	var tsize = 64;
	var z 	 = 2;
	var rows = 40;
	var cols = 50;
	var data = [[["5","5","9","9","54","63","6","6","6","54","63","6","39","5","5","5","42","51","5","5","5","9","6","6","6","6","3","3","3","3","3","38","38","5","83","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["5","5","9","9","54","63","20","23","23","28","30","23","40","5","5","5","42","51","5","5","5","10","3","6","6","6","3","3","3","3","6","38","38","5","83","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["5","5","9","9","54","63","38","24","5","42","45","46","46","46","46","46","49","51","5","5","5","11","23","23","23","23","18","3","3","3","3","38","38","5","83","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["5","5","9","9","54","63","38","5","5","43","47","47","47","47","47","47","47","52","5","5","5","5","5","5","5","5","9","3","3","3","3","38","38","5","83","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["5","5","9","9","54","63","21","25","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","16","19","3","3","3","3","38","38","5","83","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["5","5","9","9","54","63","3","26","32","32","32","32","32","32","32","32","32","32","32","32","32","32","32","32","32","17","3","6","3","6","3","38","38","5","83","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["5","5","9","9","54","57","58","58","58","58","58","58","58","58","58","58","58","58","58","58","58","58","58","58","58","58","58","58","58","58","62","38","38","5","83","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["5","5","9","9","55","59","59","59","59","59","59","60","56","59","59","59","59","59","59","59","59","59","59","59","59","59","59","59","59","59","64","38","38","5","83","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["5","5","9","9","6","3","3","3","6","6","6","54","63","6","6","3","3","3","6","3","3","3","3","3","6","3","3","3","6","6","3","38","38","5","83","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["5","5","9","10","6","6","3","6","20","23","23","28","30","23","23","18","3","3","3","3","3","6","3","6","6","3","6","3","3","3","3","38","38","5","83","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["5","5","9","90","23","18","3","3","38","86","6","54","63","6","87","10","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","39","38","5","83","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["5","5","10","6","87","9","6","3","38","20","23","28","30","23","18","90","23","23","23","23","23","23","23","23","23","23","23","23","23","23","23","91","38","5","83","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["5","5","11","23","18","9","3","3","38","38","24","42","51","15","10","6","6","6","6","6","6","6","6","6","6","6","6","3","6","6","6","6","39","5","83","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["5","5","5","15","9","9","3","6","38","38","5","42","51","5","11","23","23","23","23","23","23","23","23","23","23","23","23","23","23","23","23","23","40","5","83","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["69","69","72","5","9","10","6","6","39","38","5","42","51","5","5","5","5","5","1","5","5","1","1","1","1","5","5","5","5","5","5","5","5","5","83","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["85","85","73","75","9","90","23","23","91","38","5","42","45","46","46","46","46","46","46","46","46","46","46","46","46","46","46","46","46","46","46","50","5","80","84","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["85","85","85","66","10","6","6","6","6","39","5","43","47","47","47","47","47","47","47","47","47","47","47","47","47","47","47","47","47","47","48","51","77","81","85","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["85","85","85","66","11","23","23","23","23","40","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","80","28","30","84","85","85","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["85","85","85","67","69","69","69","69","69","69","69","69","69","69","69","69","69","69","69","69","69","69","69","69","69","72","5","5","77","81","28","30","85","85","85","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","73","75","5","83","85","28","30","85","85","85","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","67","69","84","85","28","30","85","85","85","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","28","30","85","85","85","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","28","30","85","85","85","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","28","30","85","85","85","85","85","85","85","85","85","85","85","85",0,0,0,0,0,0],["32","32","32","32","32","32","32","32","32","32","34","34","32","32","32","32","32","34","34","32","32","32","32","32","32","32","32","32","32","32","28","30","32","32","32","32","32","32","32","32","32","93","85","85",0,0,0,0,0,0],["6","6","94","32","32","32","32","32","32","32","34","34","32","32","32","32","95","6","3","3","3","6","6","6","6","6","3","3","6","53","61","57","62","6","6","3","3","3","3","3","3","38","85","85",0,0,0,0,0,0],["6","94","9","53","58","58","58","58","58","58","58","58","58","58","58","62","38","95","3","3","3","3","3","3","3","3","3","3","6","54","4","4","63","6","6","3","3","3","3","6","3","38","85","85",0,0,0,0,0,0],["94","9","9","54","56","59","59","59","59","59","59","59","59","59","60","63","38","38","32","32","34","34","34","34","34","34","32","95","6","54","4","4","63","6","6","6","3","3","6","6","3","38","85","85",0,0,0,0,0,0],["9","9","9","54","63","6","6","3","3","3","6","3","6","6","54","63","38","38","3","3","6","6","6","6","6","6","6","38","6","54","4","4","63","6","3","3","94","32","32","95","3","38","85","85",0,0,0,0,0,0],["9","9","9","54","57","58","58","58","58","58","58","58","58","58","61","63","38","38","3","3","6","6","6","6","6","6","6","38","6","54","4","4","63","3","3","6","9","6","6","38","3","38","85","85",0,0,0,0,0,0],["9","9","9","55","59","59","59","59","60","56","59","59","59","59","59","64","38","38","3","3","3","6","6","6","6","6","6","38","3","54","4","4","63","3","6","6","10","6","6","39","3","38","85","85",0,0,0,0,0,0],["9","9","10","6","6","6","6","6","54","63","6","6","6","6","6","6","39","38","6","6","3","6","6","6","6","6","6","38","6","54","4","4","63","3","6","6","90","23","23","91","3","38","85","85",0,0,0,0,0,0],["9","9","90","23","23","23","23","23","28","30","23","23","23","23","23","23","91","38","6","6","6","3","3","6","6","6","3","38","6","54","4","4","63","3","6","6","6","6","6","3","6","38","85","85",0,0,0,0,0,0],["9","10","6","6","6","6","3","3","54","63","3","3","6","6","6","6","6","39","3","3","6","6","3","6","6","6","6","38","3","54","4","4","63","6","6","6","3","3","3","6","3","38","85","85",0,0,0,0,0,0],["9","90","23","23","23","23","23","23","28","30","23","23","23","23","23","23","23","91","3","6","6","6","6","6","6","6","3","38","3","54","4","4","63","3","6","6","6","6","6","3","3","38","85","85",0,0,0,0,0,0],["10","6","6","6","6","6","3","3","54","63","3","3","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","39","3","54","4","4","63","3","3","6","6","6","3","3","3","38","68","68",0,0,0,0,0,0],["90","23","23","23","23","23","23","23","28","30","23","23","23","23","23","23","23","23","23","23","23","23","23","23","23","23","23","91","3","54","4","4","63","3","6","3","6","6","6","6","3","21","25","5",0,0,0,0,0,0],["6","6","6","6","3","6","3","3","54","63","3","3","3","6","6","6","3","3","6","3","3","6","6","6","3","3","3","3","6","54","4","4","63","3","3","3","3","6","6","6","3","6","26","32",0,0,0,0,0,0],["6","3","6","3","3","3","6","6","54","57","58","58","58","58","58","58","58","58","58","58","58","58","58","58","58","58","58","58","58","61","4","4","57","58","58","58","58","58","58","58","58","58","58","58",0,0,0,0,0,0],["3","3","3","3","3","3","3","6","55","59","59","59","59","59","59","59","59","59","59","59","59","59","59","59","59","59","59","59","59","60","4","4","56","59","59","59","59","59","59","59","59","59","59","59",0,0,0,0,0,0]],[["0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"96","97",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"98","99",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"96","97",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"96","97","98","99",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,"96","97",0,0,0,0,"96","97",0,"96","97",0,"96","97",0,"96","97",0,0,"98","99",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,"98","99",0,0,0,0,"98","99",0,"98","99",0,"98","99",0,"98","99",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"96","97",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"98","99",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"96","97",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,"96","97",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"98","99",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,"98","99",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"96","97",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,"96","97",0,0,0,0,0,"98","99",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,"98","99",0,0,0,0,0,0,"96","97",0,0,0,0,0,0,"96","97",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"98","99","96","97",0,0,0,0,"98","99",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"98","99","96","97","96","97",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"96","110","99","98","111","97",0,0,0,0,0,0,0,0,0,0,"96","97",0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"98","111","97","6","98","99",0,0,0,0,0,0,0,0,0,0,"98","99",0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"96","110","111","97","96","97",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"98","99","98","99","98","99",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,"96","97",0,0,"96","97",0,0,0,0,0,0,0,0,0,0,0,"96","97","0","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,"98","99",0,0,"98","99",0,0,0,0,0,0,0,0,0,0,0,"98","111","97","0",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,"96","97",0,0,"96","97",0,0,0,0,0,0,0,0,0,0,0,0,"98","99",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,"98","99",0,0,"98","99",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,"96","97",0,0,"96","97",0,0,0,0,"96","97",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,"98","99",0,0,"98","99",0,0,0,0,"98","99",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]];
	var tile = 0;

	for(var m = 0; m< z; m++) {
		$("#map").append('<div class="layer l'+m+'" data-m="'+m+'"></div>');
		for(var k = 0; k < rows; k++) {
			for(var l = 0; l < cols; l++) {
				if(data[m] == undefined) {
					data[m] = [];
				}
				if(data[m][k] == undefined) {
					data[m][k] = [];
				}
				if(data[m][k][l] == undefined) {
					data[m][k][l] = 0;
				}
				$("#map .layer.l"+m+"").append('<div class="tile t'+data[m][k][l]+'" data-k="'+k+'" data-l="'+l+'" style="left:'+l*64+'px; top: '+k*64+'px;"></div>');
			}
		}
	}

	$(".tile").on("click", function() {
		$(this).attr("class", "tile t"+tile);
		data[$(this).closest(".layer").attr("data-m")][$(this).attr("data-k")][$(this).attr("data-l")] = tile;
		$("#export").val(JSON.stringify(data));
	});

	var tiles = 150;
	var ccols = 8;
	for(var i = 0; i < tiles; i++) {
		$("#control").append('<div class="control t'+i+'" data-tile="'+i+'"></div>');
	}

	$(".control").click(function() {
		tile = $(this).attr("data-tile");
		$(".control").removeClass("active");
		$(this).addClass("active");
	});

	$("#lock0").click(function() {
		$("body").addClass("lock1");
		$("#lock1").removeClass("in");
		$("body").toggleClass("lock0");
		$(this).toggleClass("in");
	})
	$("#lock1").click(function() {
		$("body").addClass("lock0");
		$("#lock0").removeClass("in");
		$("body").toggleClass("lock1");
		$(this).toggleClass("in");
	})
});